<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Z-shitty Loading Screen</title>
    <style>
        :root {
            --main-color: #ff8000; 
            --bg-overlay: rgba(0, 0, 0, 0.8);
        }

        body {
            margin: 0;
            padding: 0;
            background-color: #000;
            color: white;
            font-family: 'Courier New', Courier, monospace;
            overflow: hidden;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #bg-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2; }
        .bg-slide { 
            position: absolute; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background-size: cover; 
            background-position: center; 
            opacity: 0; 
            transition: opacity 1.5s ease-in-out; 
        }
        .bg-slide.active { opacity: 1; }
        #overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-overlay); z-index: -1; }

        .container { z-index: 10; text-align: center; width: 800px; }

        h1 { 
            font-size: 4rem; 
            margin: 0; 
            font-family: Arial, sans-serif; 
            font-weight: bold; 
            text-transform: uppercase; 
            text-shadow: 0 0 20px var(--main-color); 
        }
        h1 span { color: var(--main-color); }

        .status-text { text-align: left; font-size: 13px; margin: 10px 0 5px 0; color: #bbb; }

        .progress-bar-container { 
            width: 100%; 
            height: 20px; 
            border: 1px solid #333; 
            background: #000; 
            margin-bottom: 10px; 
            padding: 2px; 
            box-sizing: border-box; 
        }
        .progress-bar-fill { 
            height: 100%; 
            background-color: var(--main-color); 
            width: 0%; 
            box-shadow: 0 0 10px var(--main-color); 
            background-image: linear-gradient(90deg, rgba(0,0,0,0.4) 2px, transparent 2px); 
            background-size: 15px 100%; 
        }

        .console-box { 
            width: 100%; 
            height: 120px; 
            border: 1px solid var(--main-color); 
            background: rgba(0, 0, 0, 0.9); 
            padding: 10px; 
            text-align: left; 
            box-sizing: border-box; 
            font-size: 12px; 
            overflow: hidden; 
            display: flex; 
            flex-direction: column; 
            justify-content: flex-end; 
        }
        .log-line { margin: 1px 0; }
        .log-prefix { color: var(--main-color); font-weight: bold; }

        .players-header { 
            margin-top: 15px; 
            text-align: left; 
            font-weight: bold; 
            color: var(--main-color); 
            border-bottom: 1px solid var(--main-color); 
            padding-bottom: 3px; 
            font-size: 14px; 
        }
        .players-list { 
            width: 100%; 
            height: 100px; 
            background: rgba(0,0,0,0.6); 
            display: flex; 
            flex-wrap: wrap; 
            align-content: flex-start; 
            padding: 5px; 
            box-sizing: border-box; 
            font-size: 12px; 
            overflow: hidden; 
        }
        .player-item { 
            width: 33%; 
            text-align: left; 
            color: #eee; 
            white-space: nowrap; 
            overflow: hidden; 
            text-overflow: ellipsis; 
            padding: 2px 0; 
        }
        .player-item::before { content: "> "; color: var(--main-color); }

        .orange { 
            position: absolute; 
            top: -30px; 
            font-size: 20px; 
            z-index: 1; 
            animation: fall linear forwards; 
            user-select: none;
        }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }
    </style>
</head>
<body>

    <div id="bg-container"></div>
    <div id="overlay"></div>

    <audio id="bg-music" loop preload="auto">
        <source src="Sewerslvt-the-last-thing-she-sent-me-_get.gt_.mp3" type="audio/mpeg">
    </audio>

    <div class="container">
        <h1>Z-<span>SHITTY</span></h1>
        <div class="status-text" id="status-text">Connecting...</div>
        <div class="progress-bar-container">
            <div class="progress-bar-fill" id="progress"></div>
        </div>
        <div class="console-box" id="console"></div>
        <div class="players-header">PLAYERS ONLINE [<span id="player-count">0</span>]</div>
        <div class="players-list" id="player-list"></div>
    </div>

    <script>
        const music = document.getElementById('bg-music');
        music.volume = 0.2;

        function attemptPlay() {
            music.play().then(() => {
                console.log("Audio started!");
                removeListeners();
            }).catch(err => {
                console.log("Waiting for interaction...");
            });
        }

        function removeListeners() {
            window.removeEventListener('mousemove', attemptPlay);
            window.removeEventListener('mousedown', attemptPlay);
            window.removeEventListener('keydown', attemptPlay);
        }

        const autoPlayInterval = setInterval(() => {
            if (!music.paused) {
                clearInterval(autoPlayInterval);
            } else {
                attemptPlay();
            }
        }, 500);

        window.addEventListener('mousemove', attemptPlay);
        window.addEventListener('mousedown', attemptPlay);
        window.addEventListener('keydown', attemptPlay);

        const images = ['1.jpg', '2.jpg', '3.jpg', '4.jpg']; 
        const bgContainer = document.getElementById('bg-container');
        
        images.forEach((src, i) => {
            const div = document.createElement('div');
            div.classList.add('bg-slide');
            div.style.backgroundImage = `url('${src}')`;
            if (i === 0) div.classList.add('active');
            bgContainer.appendChild(div);
        });

        let currentSlide = 0;
        const slides = document.querySelectorAll('.bg-slide');
        setInterval(() => {
            if(slides.length > 1) {
                slides[currentSlide].classList.remove('active');
                currentSlide = (currentSlide + 1) % slides.length;
                slides[currentSlide].classList.add('active');
            }
        }, 4000);

        setInterval(() => {
            const orange = document.createElement('div');
            orange.innerHTML = 'ðŸŠ';
            orange.className = 'orange';
            orange.style.left = Math.random() * 100 + 'vw';
            orange.style.animationDuration = (Math.random() * 3 + 3) + 's';
            document.body.appendChild(orange);
            setTimeout(() => orange.remove(), 6000);
        }, 400);

        const playerList = document.getElementById('player-list');
        const playerCount = document.getElementById('player-count');
        const consoleBox = document.getElementById('console');
        const progressBar = document.getElementById('progress');
        const statusText = document.getElementById('status-text');
        let players = [];

        function updatePlayerUI() {
            playerList.innerHTML = "";
            players.forEach(name => {
                const p = document.createElement('div');
                p.className = 'player-item';
                p.innerText = name;
                playerList.appendChild(p);
            });
            playerCount.innerText = players.length;
        }

        function SetPlayerEntity(name) {
            if (!players.includes(name)) {
                players.push(name);
                updatePlayerUI();
            }
        }

        function addLog(text) {
            const line = document.createElement('div');
            line.className = 'log-line';
            line.innerHTML = `<span class="log-prefix">[SYS]</span> ${text}`;
            consoleBox.appendChild(line);
            if (consoleBox.childNodes.length > 8) consoleBox.removeChild(consoleBox.firstChild);
        }

        function SetStatusChanged(status) {
            statusText.innerText = status;
            addLog(status);
        }

        function DownloadingFile(file) {
            addLog("Downloading: " + file);
        }

        if (!window.gmod && !navigator.userAgent.includes("Valve Source")) {
            let p = 0;
            setInterval(() => { if (p < 100) { p += 0.5; progressBar.style.width = p + '%'; } }, 100);
            addLog("Welcome to Z-shitty.");
        }
    </script>
</body>
</html>